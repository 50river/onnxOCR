<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Éë„Éï„Ç©„Éº„Éû„É≥„Çπ„ÉÜ„Çπ„Éà - È†òÂèéÊõ∏OCR„Ç¢„Éó„É™</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }

        .header {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: center;
        }

        .header h1 {
            margin: 0 0 10px 0;
            font-size: 2.5em;
        }

        .header p {
            margin: 0;
            opacity: 0.9;
            font-size: 1.1em;
        }

        .performance-info {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .performance-info h3 {
            margin-top: 0;
            color: #333;
        }

        .threshold-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .threshold-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #007AFF;
        }

        .threshold-item .label {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .threshold-item .value {
            color: #666;
            font-size: 0.9em;
        }

        .controls {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }

        .btn {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin: 0 10px;
            transition: all 0.3s ease;
        }

        .btn:hover {
            background: #ee5a24;
            transform: translateY(-2px);
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .btn.secondary {
            background: #6c757d;
        }

        .btn.secondary:hover {
            background: #545b62;
        }

        .progress {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: none;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #ee5a24);
            width: 0%;
            transition: width 0.3s ease;
        }

        .results {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: none;
        }

        .performance-grade {
            text-align: center;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 1.5em;
            font-weight: bold;
        }

        .grade-a { background: #d4edda; color: #155724; }
        .grade-b { background: #d1ecf1; color: #0c5460; }
        .grade-c { background: #fff3cd; color: #856404; }
        .grade-d { background: #f8d7da; color: #721c24; }
        .grade-f { background: #f8d7da; color: #721c24; }

        .summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .summary-card {
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            color: white;
            font-weight: bold;
        }

        .summary-card.total { background: #6c757d; }
        .summary-card.passed { background: #28a745; }
        .summary-card.failed { background: #dc3545; }
        .summary-card.warnings { background: #ffc107; color: #212529; }
        .summary-card.errors { background: #fd7e14; }

        .summary-card .number {
            font-size: 2em;
            display: block;
            margin-bottom: 5px;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #ff6b6b;
        }

        .metric-card h4 {
            margin-top: 0;
            color: #333;
        }

        .metric-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #ff6b6b;
            margin-bottom: 10px;
        }

        .metric-details {
            font-size: 0.9em;
            color: #666;
        }

        .category-results {
            margin-bottom: 30px;
        }

        .category-header {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px 8px 0 0;
            border-bottom: 2px solid #dee2e6;
            font-weight: bold;
            color: #495057;
        }

        .test-list {
            background: white;
            border-radius: 0 0 8px 8px;
            overflow: hidden;
        }

        .test-item {
            padding: 15px;
            border-bottom: 1px solid #dee2e6;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .test-item:last-child {
            border-bottom: none;
        }

        .test-info {
            flex: 1;
        }

        .test-name {
            font-weight: 500;
            color: #333;
            margin-bottom: 5px;
        }

        .test-message {
            font-size: 0.9em;
            color: #666;
        }

        .test-value {
            font-weight: bold;
            margin-right: 15px;
            color: #333;
        }

        .test-status {
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.9em;
            font-weight: bold;
        }

        .test-status.pass {
            background: #d4edda;
            color: #155724;
        }

        .test-status.fail {
            background: #f8d7da;
            color: #721c24;
        }

        .test-status.warn {
            background: #fff3cd;
            color: #856404;
        }

        .test-status.error {
            background: #f8d7da;
            color: #721c24;
        }

        .test-status.info {
            background: #d1ecf1;
            color: #0c5460;
        }

        .recommendations {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }

        .recommendations h4 {
            margin-top: 0;
            color: #856404;
        }

        .recommendation-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid #ffc107;
        }

        .recommendation-item:last-child {
            margin-bottom: 0;
        }

        .recommendation-priority {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .priority-high {
            background: #dc3545;
            color: white;
        }

        .priority-medium {
            background: #ffc107;
            color: #212529;
        }

        .priority-low {
            background: #28a745;
            color: white;
        }

        .recommendation-issue {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .recommendation-solution {
            color: #666;
            font-size: 0.9em;
        }

        .console-output {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 20px;
        }

        .console-output pre {
            margin: 0;
            white-space: pre-wrap;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .summary {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .metrics-grid {
                grid-template-columns: 1fr;
            }
            
            .btn {
                padding: 12px 20px;
                font-size: 14px;
                margin: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üöÄ „Éë„Éï„Ç©„Éº„Éû„É≥„Çπ„ÉÜ„Çπ„Éà</h1>
        <p>ÂàùÂõûOCRÂá¶ÁêÜÊôÇÈñì„Éª„É°„É¢„É™‰ΩøÁî®Èáè„Éª„Éê„É≥„Éâ„É´„Çµ„Ç§„Ç∫„ÅÆÊúÄÈÅ©ÂåñÁ¢∫Ë™ç</p>
    </div>

    <div class="performance-info">
        <h3>üìä „Éë„Éï„Ç©„Éº„Éû„É≥„ÇπÁõÆÊ®ôÂÄ§</h3>
        <div class="threshold-list">
            <div class="threshold-item">
                <div class="label">OCRÂá¶ÁêÜÊôÇÈñì</div>
                <div class="value">‚â§ 10Áßí</div>
            </div>
            <div class="threshold-item">
                <div class="label">„Éê„É≥„Éâ„É´„Çµ„Ç§„Ç∫</div>
                <div class="value">‚â§ 50MB</div>
            </div>
            <div class="threshold-item">
                <div class="label">„É°„É¢„É™‰ΩøÁî®Èáè</div>
                <div class="value">‚â§ 200MB</div>
            </div>
            <div class="threshold-item">
                <div class="label">ÂàùÂõûË™≠„ÅøËæº„ÅøÊôÇÈñì</div>
                <div class="value">‚â§ 5Áßí</div>
            </div>
            <div class="threshold-item">
                <div class="label">ÁîªÂÉèÂá¶ÁêÜÊôÇÈñì</div>
                <div class="value">‚â§ 3Áßí</div>
            </div>
        </div>
    </div>

    <div class="controls">
        <button id="run-tests" class="btn">üöÄ „Éë„Éï„Ç©„Éº„Éû„É≥„Çπ„ÉÜ„Çπ„Éà„ÇíÂÆüË°å</button>
        <button id="clear-results" class="btn secondary" disabled>üóëÔ∏è ÁµêÊûú„Çí„ÇØ„É™„Ç¢</button>
    </div>

    <div id="progress" class="progress">
        <h3>‚è≥ „ÉÜ„Çπ„ÉàÂÆüË°å‰∏≠...</h3>
        <div class="progress-bar">
            <div id="progress-fill" class="progress-fill"></div>
        </div>
        <div id="progress-text">Ê∫ñÂÇô‰∏≠...</div>
    </div>

    <div id="results" class="results">
        <div id="performance-grade" class="performance-grade">
            <!-- „Éë„Éï„Ç©„Éº„Éû„É≥„Çπ„Ç∞„É¨„Éº„Éâ„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô -->
        </div>

        <div class="summary">
            <div class="summary-card total">
                <span id="total-tests" class="number">0</span>
                <span>Á∑è„ÉÜ„Çπ„ÉàÊï∞</span>
            </div>
            <div class="summary-card passed">
                <span id="passed-tests" class="number">0</span>
                <span>ÊàêÂäü</span>
            </div>
            <div class="summary-card failed">
                <span id="failed-tests" class="number">0</span>
                <span>Â§±Êïó</span>
            </div>
            <div class="summary-card warnings">
                <span id="warning-tests" class="number">0</span>
                <span>Ë≠¶Âëä</span>
            </div>
            <div class="summary-card errors">
                <span id="error-tests" class="number">0</span>
                <span>„Ç®„É©„Éº</span>
            </div>
        </div>

        <div id="metrics-grid" class="metrics-grid">
            <!-- „É°„Éà„É™„ÇØ„Çπ„Ç´„Éº„Éâ„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô -->
        </div>

        <div id="category-results">
            <!-- „Ç´„ÉÜ„Ç¥„É™Âà•ÁµêÊûú„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô -->
        </div>

        <div id="recommendations" class="recommendations" style="display: none;">
            <h4>üí° ÊúÄÈÅ©ÂåñÊé®Â•®‰∫ãÈ†Ö</h4>
            <div id="recommendations-list">
                <!-- Êé®Â•®‰∫ãÈ†Ö„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô -->
            </div>
        </div>
    </div>

    <div id="console-output" class="console-output" style="display: none;">
        <h4 style="color: #d4d4d4; margin-top: 0;">üìã „Ç≥„É≥„ÇΩ„Éº„É´Âá∫Âäõ</h4>
        <pre id="console-content"></pre>
    </div>

    <script src="performance-tests.js"></script>
    <script>
        let performanceTests;
        let consoleOutput = [];

        // „Ç≥„É≥„ÇΩ„Éº„É´Âá∫Âäõ„Çí„Ç≠„É£„Éó„ÉÅ„É£
        const originalConsoleLog = console.log;
        const originalConsoleError = console.error;
        const originalConsoleWarn = console.warn;

        console.log = function(...args) {
            consoleOutput.push(`[LOG] ${args.join(' ')}`);
            updateConsoleOutput();
            originalConsoleLog.apply(console, args);
        };

        console.error = function(...args) {
            consoleOutput.push(`[ERROR] ${args.join(' ')}`);
            updateConsoleOutput();
            originalConsoleError.apply(console, args);
        };

        console.warn = function(...args) {
            consoleOutput.push(`[WARN] ${args.join(' ')}`);
            updateConsoleOutput();
            originalConsoleWarn.apply(console, args);
        };

        function updateConsoleOutput() {
            const consoleElement = document.getElementById('console-content');
            const consoleContainer = document.getElementById('console-output');
            
            if (consoleOutput.length > 0) {
                consoleElement.textContent = consoleOutput.join('\n');
                consoleContainer.style.display = 'block';
                consoleElement.scrollTop = consoleElement.scrollHeight;
            }
        }

        // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇ„ÅÆÂàùÊúüÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            performanceTests = new PerformanceTests();

            // URL„Éë„É©„É°„Éº„Çø„ÅßËá™ÂãïÂÆüË°å„Çí„ÉÅ„Çß„ÉÉ„ÇØ
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.has('run-performance-tests')) {
                setTimeout(runTests, 1000);
            }
        });

        async function runTests() {
            const runButton = document.getElementById('run-tests');
            const clearButton = document.getElementById('clear-results');
            const progressDiv = document.getElementById('progress');
            const resultsDiv = document.getElementById('results');

            // UI„ÅÆÁä∂ÊÖã„ÇíÊõ¥Êñ∞
            runButton.disabled = true;
            runButton.textContent = '‚è≥ „ÉÜ„Çπ„ÉàÂÆüË°å‰∏≠...';
            clearButton.disabled = true;
            progressDiv.style.display = 'block';
            resultsDiv.style.display = 'none';
            consoleOutput = [];

            try {
                // „Éó„É≠„Ç∞„É¨„ÇπÊõ¥Êñ∞„ÅÆ„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥
                const progressSteps = [
                    { text: 'ÂàùÂõûË™≠„ÅøËæº„ÅøÊôÇÈñì„ÇíÊ∏¨ÂÆö‰∏≠...', progress: 15 },
                    { text: '„É™„ÇΩ„Éº„Çπ„Çµ„Ç§„Ç∫„ÇíÂàÜÊûê‰∏≠...', progress: 30 },
                    { text: '„É°„É¢„É™‰ΩøÁî®Èáè„ÇíÊ∏¨ÂÆö‰∏≠...', progress: 45 },
                    { text: 'OCR„Éë„Éï„Ç©„Éº„Éû„É≥„Çπ„Çí„ÉÜ„Çπ„Éà‰∏≠...', progress: 60 },
                    { text: 'ÁîªÂÉèÂá¶ÁêÜ„Éë„Éï„Ç©„Éº„Éû„É≥„Çπ„Çí„ÉÜ„Çπ„Éà‰∏≠...', progress: 75 },
                    { text: '„É¨„É≥„ÉÄ„É™„É≥„Ç∞„Éë„Éï„Ç©„Éº„Éû„É≥„Çπ„Çí„ÉÜ„Çπ„Éà‰∏≠...', progress: 90 },
                    { text: '„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„Éë„Éï„Ç©„Éº„Éû„É≥„Çπ„ÇíÂàÜÊûê‰∏≠...', progress: 100 }
                ];

                for (const step of progressSteps) {
                    updateProgress(step.text, step.progress);
                    await new Promise(resolve => setTimeout(resolve, 300));
                }

                // ÂÆüÈöõ„ÅÆ„ÉÜ„Çπ„ÉàÂÆüË°å
                const report = await performanceTests.runAllTests();
                
                // ÁµêÊûú„ÅÆË°®Á§∫
                displayResults(report);

            } catch (error) {
                console.error('„ÉÜ„Çπ„ÉàÂÆüË°å‰∏≠„Å´„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü:', error);
                alert(`„ÉÜ„Çπ„ÉàÂÆüË°å‰∏≠„Å´„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü: ${error.message}`);
            } finally {
                // UI„ÅÆÁä∂ÊÖã„Çí„É™„Çª„ÉÉ„Éà
                runButton.disabled = false;
                runButton.textContent = 'üöÄ „Éë„Éï„Ç©„Éº„Éû„É≥„Çπ„ÉÜ„Çπ„Éà„ÇíÂÆüË°å';
                clearButton.disabled = false;
                progressDiv.style.display = 'none';
            }
        }

        function updateProgress(text, progress) {
            document.getElementById('progress-text').textContent = text;
            document.getElementById('progress-fill').style.width = `${progress}%`;
        }

        function displayResults(report) {
            const resultsDiv = document.getElementById('results');
            resultsDiv.style.display = 'block';

            // „Éë„Éï„Ç©„Éº„Éû„É≥„Çπ„Ç∞„É¨„Éº„Éâ„ÅÆË°®Á§∫
            displayPerformanceGrade(report.performanceGrade);

            // „Çµ„Éû„É™„Éº„ÅÆÊõ¥Êñ∞
            document.getElementById('total-tests').textContent = report.summary.total;
            document.getElementById('passed-tests').textContent = report.summary.passed;
            document.getElementById('failed-tests').textContent = report.summary.failed;
            document.getElementById('warning-tests').textContent = report.summary.warnings;
            document.getElementById('error-tests').textContent = report.summary.errors;

            // „É°„Éà„É™„ÇØ„Çπ„ÅÆË°®Á§∫
            displayMetrics(report.metrics);

            // „Ç´„ÉÜ„Ç¥„É™Âà•ÁµêÊûú„ÅÆË°®Á§∫
            displayCategoryResults(report);

            // Êé®Â•®‰∫ãÈ†Ö„ÅÆË°®Á§∫
            if (report.recommendations && report.recommendations.length > 0) {
                displayRecommendations(report.recommendations);
            }

            console.log('üìä „Éë„Éï„Ç©„Éº„Éû„É≥„Çπ„ÉÜ„Çπ„ÉàÁµêÊûú„Çµ„Éû„É™„Éº');
            console.log(`ÂêàÊ†º: ${report.summary.passed}/${report.summary.total}`);
            console.log(`ÊàêÂäüÁéá: ${(report.summary.passed / report.summary.total * 100).toFixed(1)}%`);
            console.log(`„Éë„Éï„Ç©„Éº„Éû„É≥„Çπ„Ç∞„É¨„Éº„Éâ: ${report.performanceGrade}`);
        }

        function displayPerformanceGrade(grade) {
            const gradeDiv = document.getElementById('performance-grade');
            gradeDiv.className = `performance-grade grade-${grade.toLowerCase()}`;
            
            const gradeTexts = {
                'A': 'üèÜ ÂÑ™ÁßÄ (Grade A)',
                'B': 'üëç ËâØÂ•Ω (Grade B)',
                'C': '‚ö†Ô∏è ÊôÆÈÄö (Grade C)',
                'D': 'üìâ Ë¶ÅÊîπÂñÑ (Grade D)',
                'F': '‚ùå ‰∏çÂêàÊ†º (Grade F)'
            };
            
            gradeDiv.textContent = gradeTexts[grade] || `Grade ${grade}`;
        }

        function displayMetrics(metrics) {
            const metricsGrid = document.getElementById('metrics-grid');
            metricsGrid.innerHTML = '';

            // ÂàùÂõûË™≠„ÅøËæº„ÅøÊôÇÈñì
            if (metrics.initialLoad) {
                const card = createMetricCard(
                    '‚è±Ô∏è ÂàùÂõûË™≠„ÅøËæº„ÅøÊôÇÈñì',
                    `${metrics.initialLoad.totalLoadTime.toFixed(0)}ms`,
                    `DOMË™≠„ÅøËæº„Åø: ${metrics.initialLoad.domContentLoadedTime.toFixed(0)}ms`
                );
                metricsGrid.appendChild(card);
            }

            // „Éê„É≥„Éâ„É´„Çµ„Ç§„Ç∫
            if (metrics.resourceSizes) {
                const card = createMetricCard(
                    'üì¶ „Éê„É≥„Éâ„É´„Çµ„Ç§„Ç∫',
                    formatBytes(metrics.resourceSizes.total),
                    `„É™„ÇØ„Ç®„Çπ„ÉàÊï∞: ${Object.keys(metrics.resourceSizes.breakdown).length}`
                );
                metricsGrid.appendChild(card);
            }

            // „É°„É¢„É™‰ΩøÁî®Èáè
            if (metrics.memory) {
                const card = createMetricCard(
                    'üß† „É°„É¢„É™‰ΩøÁî®Èáè',
                    formatBytes(metrics.memory.usedJSHeapSize),
                    `„Éí„Éº„ÉóÂà∂Èôê: ${formatBytes(metrics.memory.jsHeapSizeLimit)}`
                );
                metricsGrid.appendChild(card);
            }

            // OCR„Éë„Éï„Ç©„Éº„Éû„É≥„Çπ
            if (metrics.ocrPerformance) {
                const card = createMetricCard(
                    'üîç OCRÂá¶ÁêÜÊôÇÈñì',
                    `${metrics.ocrPerformance.processingTime.toFixed(0)}ms`,
                    `ÁîªÂÉè„Çµ„Ç§„Ç∫: ${metrics.ocrPerformance.imageSize}`
                );
                metricsGrid.appendChild(card);
            }

            // ÁîªÂÉèÂá¶ÁêÜ„Éë„Éï„Ç©„Éº„Éû„É≥„Çπ
            if (metrics.imageProcessing) {
                const card = createMetricCard(
                    'üñºÔ∏è ÁîªÂÉèÂá¶ÁêÜÊôÇÈñì',
                    `${metrics.imageProcessing.processingTime.toFixed(0)}ms`,
                    `ÁîªÂÉè„Çµ„Ç§„Ç∫: ${metrics.imageProcessing.imageSize}`
                );
                metricsGrid.appendChild(card);
            }

            // „Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„Éë„Éï„Ç©„Éº„Éû„É≥„Çπ
            if (metrics.network) {
                const card = createMetricCard(
                    'üåê „Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ',
                    `${metrics.network.averageResponseTime.toFixed(0)}ms`,
                    `Á∑è„É™„ÇØ„Ç®„Çπ„Éà: ${metrics.network.totalRequests}`
                );
                metricsGrid.appendChild(card);
            }
        }

        function createMetricCard(title, value, details) {
            const card = document.createElement('div');
            card.className = 'metric-card';
            card.innerHTML = `
                <h4>${title}</h4>
                <div class="metric-value">${value}</div>
                <div class="metric-details">${details}</div>
            `;
            return card;
        }

        function displayCategoryResults(report) {
            const categoryResultsDiv = document.getElementById('category-results');
            categoryResultsDiv.innerHTML = '';

            Object.keys(report.categories).forEach(category => {
                const categoryData = report.categories[category];
                const categoryResults = report.results.filter(r => r.category === category);

                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'category-results';

                const headerDiv = document.createElement('div');
                headerDiv.className = 'category-header';
                headerDiv.innerHTML = `
                    ${category} 
                    <span style="float: right;">
                        ${categoryData.passed}/${categoryData.total} ÊàêÂäü
                    </span>
                `;

                const testListDiv = document.createElement('div');
                testListDiv.className = 'test-list';

                categoryResults.forEach(result => {
                    const testItemDiv = document.createElement('div');
                    testItemDiv.className = 'test-item';

                    const statusClass = result.status.toLowerCase();

                    testItemDiv.innerHTML = `
                        <div class="test-info">
                            <div class="test-name">${result.test}</div>
                            <div class="test-message">${result.message}</div>
                        </div>
                        <div style="display: flex; align-items: center;">
                            ${result.value ? `<div class="test-value">${result.value}</div>` : ''}
                            <div class="test-status ${statusClass}">${result.status}</div>
                        </div>
                    `;

                    testListDiv.appendChild(testItemDiv);
                });

                categoryDiv.appendChild(headerDiv);
                categoryDiv.appendChild(testListDiv);
                categoryResultsDiv.appendChild(categoryDiv);
            });
        }

        function displayRecommendations(recommendations) {
            const recommendationsDiv = document.getElementById('recommendations');
            const recommendationsList = document.getElementById('recommendations-list');
            
            recommendationsList.innerHTML = '';
            recommendations.forEach(recommendation => {
                const item = document.createElement('div');
                item.className = 'recommendation-item';
                
                const priorityClass = `priority-${recommendation.priority.toLowerCase()}`;
                
                item.innerHTML = `
                    <div class="recommendation-priority ${priorityClass}">${recommendation.priority}</div>
                    <div class="recommendation-issue">${recommendation.issue}</div>
                    <div class="recommendation-solution">${recommendation.solution}</div>
                `;
                
                recommendationsList.appendChild(item);
            });

            recommendationsDiv.style.display = 'block';
        }

        function formatBytes(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function clearResults() {
            document.getElementById('results').style.display = 'none';
            document.getElementById('console-output').style.display = 'none';
            consoleOutput = [];
            
            // „Çµ„Éû„É™„Éº„Çí„É™„Çª„ÉÉ„Éà
            document.getElementById('total-tests').textContent = '0';
            document.getElementById('passed-tests').textContent = '0';
            document.getElementById('failed-tests').textContent = '0';
            document.getElementById('warning-tests').textContent = '0';
            document.getElementById('error-tests').textContent = '0';
            
            document.getElementById('clear-results').disabled = true;
        }

        // „Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº„ÅÆË®≠ÂÆö
        document.getElementById('run-tests').addEventListener('click', runTests);
        document.getElementById('clear-results').addEventListener('click', clearResults);
    </script>
</body>
</html>